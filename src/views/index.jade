section#content(autoscroll='false')
  a.casos-toggle(href="javascript:void(0);" ng-click="toggleCasos()" ng-show="initialized" ng-class='{"collapsed": isDossier || !initialized, "in-case": isCase, "active": showList}') 
    span(ng-hide="showList") Lista de casos
    span(ng-show="showList") -
  section#casos(ng-class='{"collapsed": isDossier || !initialized, "in-case": isCase, "active": showList}')
    a.dl-csv.button(href="javascript:void(0);" ng-click="downloadCasos(filtered)")
      span.icon.icon-download 
      | CSV
    h2.results-count {{filtered.length}} casos encontrados
    ul.caso-list(ng-show='casos.length && initialized')
      li(ng-repeat='caso in filtered = (casos | filter:filter.text | exact:filter.strict | dateFilter:filter.date | caseIds:dossierCases) | limitTo:50')
        article.clearfix
          .location
            span.icon.icon-pin
            p.location-info
              a(ng-click="focusMap(caso)" href="javascript:void(0);" ng-bind-html='caso | caseLocation')
          header.caso-header
            h3
              a(ui-sref='home.case({caseId: caso.ID})' force-onclick='600' force-parent='casos') {{caso | casoName}}
            .header-meta
              .age.meta(ng-show='caso.idade')
                span.icon.icon-chevron-small-right
                p {{caso.idade}} anos
              .date.meta
                span.icon.icon-calendar
                p.date-info(ng-bind-html='caso | casoDate')
          //- p {{caso.descricao}}

.map-container(ng-class='{full: isDossier, "in-case": isCase, "collapsed": showList && initialized}')
  map#map(map-data='mapData' markers='filtered | postToMarker:"home":"home.dossier"' heat-marker="false")
  
div(ui-view)
