
<section id="dossies" ng-show="dossiers.length" ng-class="{collapsed: initialized}">
  <h2>DossiÃªs</h2>
  <ul class="dossie-list">
    <li ng-repeat="dossier in dossiers">
      <div style="background-image:url({{dossier.featured_image.attachment_meta.sizes.large.url}});" class="image"></div>
      <article>
        <h3><a ui-sref="home.dossier({id: dossier.ID})">{{dossier.title}}</a></h3>
      </article>
    </li>
  </ul>
</section>
<section id="content" autoscroll="false">
  <section id="casos" ng-class="{collapsed: isDossier}">
    <form id="casos-filters" ng-show="initialized">
      <input type="text" ng-model="filter.text" placeholder="Digite sua busca">
      <div range-slider min="1986" max="2015" model-max="filter.date.max" model-min="filter.date.min" show-values="true"></div>
      <h2 class="results-count">{{filtered.length}} casos encontrados</h2>
    </form>
    <ul ng-show="casos.length &amp;&amp; initialized" class="caso-list">
      <li ng-repeat="caso in filtered = (casos | filter:filter.text | dateFilter:filter.date) | limitTo:100" class="clearfix">
        <article>
          <div class="location"><span class="icon icon-pin"></span>
            <p ng-bind-html="caso | caseLocation" class="location-info"></p>
          </div>
          <header class="caso-header">
            <h3>{{caso | casoName}}</h3>
            <div class="header-meta">
              <div ng-show="caso.idade" class="age meta"><span class="icon icon-chevron-small-right"></span>
                <p>{{caso.idade}} anos</p>
              </div>
              <div ng-show="caso.aldeia" class="village meta"><span class="icon icon-home"></span>
                <p>{{caso.aldeia}}</p>
              </div>
              <div class="date meta"><span class="icon icon-calendar"></span>
                <p ng-bind-html="caso | casoDate" class="date-info"></p>
              </div>
            </div>
          </header>
          <p>{{caso.descricao}}</p>
          <p ng-show="caso.fonte_cimi" class="source">Fonte: {{caso.fonte_cimi}}</p>
        </article>
      </li>
    </ul>
  </section>
</section>
<div ng-class="{full: isDossier}" class="map-container"><map id="map" map-data="mapData" markers="filtered | postToMarker"></map></div>
<div ui-view></div>